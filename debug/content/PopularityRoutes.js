define(["underscore","backbone","models/course/PopularityRoute","views/map/MapViewUtils","views/utils/LeafletMap/utils/Util"],function(e,t,n,r,i){return t.Collection.extend({model:n,urlRoot:"/proxy/course-service/course/popularRoutes",url:function(){return r.userInChina()?this.urlRoot+"/from/"+i.CoordinateSystem.BD09+"/CN?startLat="+this.startLat+"&startLon="+this.startLon+"&endLat="+this.endLat+"&endLon="+this.endLon+(this.courseType?"&courseType="+this.courseType:""):this.urlRoot+"?startLat="+this.startLat+"&startLon="+this.startLon+"&endLat="+this.endLat+"&endLon="+this.endLon+(this.courseType?"&courseType="+this.courseType:"")},initialize:function(e){if(!e.startLat)throw"startLat is required";if(!e.startLon)throw"startLon is required";if(!e.endLat)throw"endLat is required";if(!e.endLon)throw"endLon is required";this.courseType=e.courseType,this.startLat=e.startLat,this.startLon=e.startLon,this.endLat=e.endLat,this.endLon=e.endLon},parse:function(t){if(t){var n=[];return e.each(t,function(t){e.each(t,function(e){n.push({latitude:e[0],longitude:e[1]})})}),n}}})});