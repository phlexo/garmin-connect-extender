define(["underscore","jquery","constants/map/map","views/utils/LeafletMap/MapServices/LocationService"],function(e,t,n,r){var i=function(e){return r.apply(this,e),this};return i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.fetch=function(r,i){var s=["https://dev.virtualearth.net/REST/v1/Locations/"];s.push(encodeURIComponent(r.address)),s.push("?key="+n.bingKey),s.push("&jsonp=?"),t.getJSON(s.join(""),function(e){if(e.resourceSets&&e.resourceSets.length>0&&e.resourceSets[0].resources&&e.resourceSets[0].resources.length>0){var t=e.resourceSets[0].resources[0].point;r.success.call(i,{address:r.address,location:[t.coordinates[0],t.coordinates[1]]})}else r.error.call(i,e,"Unexpected data returned.")}).fail(function(e,t,n){r.error.call(i,t,n)})},i});