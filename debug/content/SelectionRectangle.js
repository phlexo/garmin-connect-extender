define(["require","leaflet","jquery","views/map/MapViewUtils"],function(e){var t=e("leaflet"),n=e("jquery"),r=e("views/map/MapViewUtils"),i=t.Rectangle.extend({onAdd:function(e){t.Rectangle.prototype.onAdd.call(this,e);var i=this,s=function(){n(i.editing._moveMarker._icon).hide()};i.on("mousedown",function(t){i.isDragging=!0,i.initialBounds=i.getBounds(),i.mouseDownPosition=r.getStandardizedPoint(t.latlng),i.editing.disable(),e.dragging.disable()}),e.on("mousemove",function(e){if(i.isDragging){var n=r.getStandardizedPoint(e.latlng),s={lat:n.lat-i.mouseDownPosition.lat,lon:n.lon-i.mouseDownPosition.lon},o=new t.LatLng(r.getStandardizedPoint(i.initialBounds.getSouthWest()).lat+s.lat,r.getStandardizedPoint(i.initialBounds.getSouthWest()).lon+s.lon),u=new t.LatLng(r.getStandardizedPoint(i.initialBounds.getNorthEast()).lat+s.lat,r.getStandardizedPoint(i.initialBounds.getNorthEast()).lon+s.lon),a=new t.latLngBounds(o,u);i.setBounds(a)}}),e.on("mouseup",function(){delete i.isDragging,i.editing.enable(),s(),e.dragging.enable()}),i.editing.enable(),setTimeout(s())},getStandardizedBounds:function(){var e=this.getBounds();return{sw:r.getStandardizedPoint(e.getSouthWest()),ne:r.getStandardizedPoint(e.getNorthEast())}}});return i});