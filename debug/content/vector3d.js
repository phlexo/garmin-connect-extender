/* Vector handling functions                                          (c) Chris Veness 2011-2016  */

function Vector3d(e,t,n){if(!(this instanceof Vector3d))return new Vector3d(e,t,n);this.x=Number(e),this.y=Number(t),this.z=Number(n)}Vector3d.prototype.plus=function(e){if(e instanceof Vector3d)return new Vector3d(this.x+e.x,this.y+e.y,this.z+e.z);throw new TypeError("v is not Vector3d object")},Vector3d.prototype.minus=function(e){if(e instanceof Vector3d)return new Vector3d(this.x-e.x,this.y-e.y,this.z-e.z);throw new TypeError("v is not Vector3d object")},Vector3d.prototype.times=function(e){return e=Number(e),new Vector3d(this.x*e,this.y*e,this.z*e)},Vector3d.prototype.dividedBy=function(e){return e=Number(e),new Vector3d(this.x/e,this.y/e,this.z/e)},Vector3d.prototype.dot=function(e){if(e instanceof Vector3d)return this.x*e.x+this.y*e.y+this.z*e.z;throw new TypeError("v is not Vector3d object")},Vector3d.prototype.cross=function(e){if(e instanceof Vector3d){var t=this.y*e.z-this.z*e.y,n=this.z*e.x-this.x*e.z,r=this.x*e.y-this.y*e.x;return new Vector3d(t,n,r)}throw new TypeError("v is not Vector3d object")},Vector3d.prototype.negate=function(){return new Vector3d(-this.x,-this.y,-this.z)},Vector3d.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Vector3d.prototype.unit=function(){var e=this.length();if(e===1)return this;if(e===0)return this;var t=this.x/e,n=this.y/e,r=this.z/e;return new Vector3d(t,n,r)},Vector3d.prototype.angleTo=function(e,t){if(e instanceof Vector3d){if(t instanceof Vector3d||t===undefined){var n=t===undefined?1:Math.sign(this.cross(e).dot(t)),r=this.cross(e).length()*n,i=this.dot(e);return Math.atan2(r,i)}throw new TypeError("n is not Vector3d object")}throw new TypeError("v is not Vector3d object")},Vector3d.prototype.rotateAround=function(e,t){if(e instanceof Vector3d){var n=this.unit(),r=[n.x,n.y,n.z],i=e.unit(),s=Math.sin(t),o=Math.cos(t),u=[[i.x*i.x*(1-o)+o,i.x*i.y*(1-o)-i.z*s,i.x*i.z*(1-o)+i.y*s],[i.y*i.x*(1-o)+i.z*s,i.y*i.y*(1-o)+o,i.y*i.z*(1-o)-i.x*s],[i.z*i.x*(1-o)-i.y*s,i.z*i.y*(1-o)+i.x*s,i.z*i.z*(1-o)+o]],a=[0,0,0];for(var f=0;f<3;f++)for(var l=0;l<3;l++)a[f]+=u[f][l]*r[l];var c=new Vector3d(a[0],a[1],a[2]);return c}throw new TypeError("axis is not Vector3d object")},Vector3d.prototype.toString=function(e){var t=e===undefined?3:Number(e),n="["+this.x.toFixed(t)+","+this.y.toFixed(t)+","+this.z.toFixed(t)+"]";return n},Math.sign===undefined&&(Math.sign=function(e){return e=+e,e===0||isNaN(e)?e:e>0?1:-1}),typeof module!="undefined"&&module.exports&&(module.exports=Vector3d);